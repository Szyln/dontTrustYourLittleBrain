# 製作登入介面
## 需要的效果
- 需要可以註冊帳號密碼：[[POST 表單(express)]]
- 註冊的資料（帳號密碼）需要存到 [[Database 數據庫]]
	- [[用資料夾管理 Mongoose models 模組]]
- 下次用戶登入時，檢查輸入的帳密是否吻合 DB 的註冊內容
- 如果吻合，render ([[編譯 EJS 樣板 res.render()]]) 頁面

---
## [[Express Life Cycle 生命週期]]
```js
// 匯入：express, ejs, body-parser, express-session, mongoose
// 從資料夾匯入 mongoose model （先做完下一標題）
const User = require('./models/user');
// app.set: ejs 設定
// middleware: public 資料夾, session, body-parser 設定
// connect to mongoDB by mongoose
// get: 首頁


// 註冊頁面： signup.ejs（生成 POST 表單） render
// 處理 POST 請求，html form action 要設定到這個 route
app.post('/signup', (req, res) => {
	console.log(req.body);
	// 對應 html input 的 name 屬性
	let { username, password } = req.body;
	// create and object
	let newUser = new User({ username, password });
	// save
	newUser.save().then
	res.send('感謝您，我們已經收到您的資訊')
})


// routing for all: 404
// middleware: error handler
// port listening
```
>- [[Form]]>[[input]]
>- [[Create]]
>- [[變數簡寫語法糖]]
>- [[從物件中提取屬性到變數中 Destructing an object]]
>- [[透過 Mongoose 存入 MongoDB(Save)]]
>- [[Routing 中間使用 Middleware]]
>- [[Routing for all 回應亂打的網址]]
>- [[Error Handling（Routing 後面）]]

## 管理 Mongoose Models
>- [[用資料夾管理 Mongoose models 模組]]
>- [[Validators]]
建立 models -> user.js
```js
// import
const mongoose = require('mongoose');
// define a schema
const userSchema = new mongoose.Schema({
	username: {
		type: String,
	},
	password: {
		type: String,
	}
})

// create a model
const User = mongoose.model('User', userSchema);
// export(到 app.js 用)
module.exports = User;
```

