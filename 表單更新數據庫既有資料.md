# 表單更新數據庫既有資料
- get：提供表單
- put
	- 獲得 put 請求，更新數據庫
	- 完成後重新導向學生個人頁面 （更新後的資料）

```js
// 提供更新用的表單給客戶
app.get('/students/edit/:id', async (req, res) =>
	let { id } = req.params;
	try {
		let data = await Student.findOne({ id });
		if ( data !== null ) {
			res.render('studentEdit.ejs', { data });
		} else {
			res.send('該 ID 尚未被登錄');
		}
	}
);
```

## PUT
>- [[HTTP request]]：PUT 對於 html form 是不支援的，需要安裝 npm 模組
>- [[method-override]]
>- [[findOneAndUpdate]]
```js
// 收到 put 更新後，更新數據庫
app.put('/students/edit/:id', (req, res) => {
	let { id } = req.parms;
	res.send('感謝您，資料已更新');
	let data = Student.findOneAndUpdate(
		{ id },
	)
})


```
>[[從物件中提取屬性到變數中 Destructing an object]]
```html
// POST
<form action="/students/edit/<%= data.id %>" method="POST">
	<label for="id">ID:</label>
	<input type="number" id="id" name="id" value="<%= data.id %>">
	<label for="name">name:</label>
	<input type="text" id="name" name="name" value="<%= data.name %>">
	<label for="age">age:</label>
	<input type="number" id="age" name="age" value="<%= data.age %>">
	<label for="merit">merit:</label>
	<input type="number" id="merit" name="merit" value="<%= data.merit %>">
	<label for="other">other:</label>
	<input type="number" id="other" name="other" value="<%= data.other %>">
	
	<input type="submit">
</form>
```
#js #npm #node #expressJs #mongoose #database #form #ejs #backEnd 