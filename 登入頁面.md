# 有加密的登入頁面
與[[註冊頁面]]一樣，都使用 [[bcrypt]] 加密
```js
app.get('/login', (req, res) => {
	res.render('login');
});

app.post('login', async (req, res, next) => {
	let { username, password } = res.body;
	try {
		let foundUser = await User.findOne({ username })
		// 通常不會明確說是帳號還是密碼錯誤（安全性）
		if (foundUser && password == foundUser.password) {
			res.render('member')
		} else {
			res.send('帳密有錯')
		}
	} catch(e) {
		next(e);
	}
})
```
## 未加密的登入頁面
不應這樣寫
```js
app.get('/login', (req, res) => {
	res.render('login');
});

app.post('login', async (req, res, next) => {
	let { username, password } = res.body;
	try {
		let foundUser = await User.findOne({ username })
		// 通常不會明確說是帳號還是密碼錯誤（安全性）
		if (foundUser && password == foundUser.password) {
			res.render('member')
		} else {
			res.send('帳密有錯')
		}
	} catch(e) {
		next(e);
	}
})
```
>- [[Find(Read)]]

#js #expressJs #mongoose #database #crud #cryptogrphy #ejs